= Notes on how to release new version =

== Update version ==

=== configure.ac ===
configure.ac: AC_INIT([parallel], [20100422], [bug-parallel@gnu.org])

YYYYMMDD=`yyyymmdd`
perl -i -pe "s/20\d\d\d\d\d\d/$YYYYMMDD/" configure.ac

=== src/parallel ===

src/parallel: $Global::version = 20100422;

YYYYMMDD=`yyyymmdd`
perl -i -pe "/version/ and s/20\d\d\d\d\d\d/$YYYYMMDD/" src/parallel
perl -i -pe "/version/ and s/20\d\d\d\d\d\d/$YYYYMMDD/" src/sql
perl -i -pe "/version/ and s/20\d\d\d\d\d\d/$YYYYMMDD/" src/niceload

=== Autoconf/automake ===

rm -fr autom4te.cache aclocal.m4 config.h config.h.in config.log Makefile.in missing install-sh
rm -rf src/Makefile.in
autoreconf --install -W gnu
./configure
make -j && sudo make install

== Testsuite ==

cd testsuite; make

== Update NEWS ==

With the same things that goes in the announce mail

== Package ==

./configure
make dist
make dist-bzip2

== Test the package ==

YYYYMMDD=`yyyymmdd`
cp parallel-$YYYYMMDD.tar.bz2 /tmp
pushd /tmp
tar xjvf parallel-$YYYYMMDD.tar.bz2
cd parallel-$YYYYMMDD
./configure && make -j && sudo make -j install
pushd

== Upload ==

YYYYMMDD=`yyyymmdd`
cp doc/parallel.directive parallel-$YYYYMMDD.tar.bz2.directive
perl -i -pe "s/20\d\d\d\d\d\d/$YYYYMMDD/" parallel-*.tar.*directive
gpg --clearsign parallel-$YYYYMMDD.tar.bz2.directive

YYYYMMDD=`yyyymmdd`
gpg -b parallel-$YYYYMMDD.tar.bz2

YYYYMMDD=`yyyymmdd`
echo put parallel-$YYYYMMDD.tar.bz2{,.sig,*asc} | ncftp ftp://ftp-upload.gnu.org/incoming/ftp/
#echo put parallel-$YYYYMMDD.tar.bz2{,.sig,*asc} | ncftp ftp://ftp-upload.gnu.org/incoming/alpha/

== Download and test ==

YYYYMMDD=`yyyymmdd`
pushd /tmp
rm parallel-$YYYYMMDD.tar.bz2
wget http://ftp.gnu.org/gnu/parallel/parallel-$YYYYMMDD.tar.bz2
#wget http://alpha.gnu.org/gnu/parallel/parallel-$YYYYMMDD.tar.bz2
tar xjvf parallel-$YYYYMMDD.tar.bz2
cd parallel-$YYYYMMDD
./configure
make -j && sudo make -j install
pushd

== Update OpenSUSE build system ==

https://build.opensuse.org/package/show?package=parallel&project=home%3Atange
cd ~/privat/parallel/packager/obs 
em home:tange/parallel/parallel.spec
find home:tange/parallel/* -type f | grep -v parallel.spec | parallel osc rm {}';' rm {}
make
Ret versionsnummeret fra 20100906-2 til YYYYMMDD-1

== Update Savannah ==

Content from release mail:

cat doc/release_new_version | klipper-stdin
https://savannah.gnu.org/news/submit.php?group=parallel
https://savannah.gnu.org/news/approve.php?group=parallel

# No longer updated. Too long and too buggy
# doc/pod2savannah_publicinfo src/parallel | klipper-stdin
# https://savannah.gnu.org/project/admin/editgroupinfo.php?group=parallel

== Update website ==

http://www.gnu.org/software/parallel/
http://www.gnu.org/software/parallel/man.html
http://www.gnu.org/software/parallel/sql.html
http://www.gnu.org/software/parallel/sem.html
http://www.gnu.org/software/parallel/niceload.html

pod2html src/parallel.pod > ../parallel-web/parallel/man.html
pod2html src/sql > ../parallel-web/parallel/sql.html
pod2html src/niceload > ../parallel-web/parallel/niceload.html
pod2html src/sem.pod > ../parallel-web/parallel/sem.html
cd ../parallel-web/parallel
cvs up
cvs ci

== Commit released version ==

git diff
git commit -a

== Update Freshmeat ==

http://freshmeat.net/projects/parallel/releases/new

== Update Twitter ==

New version of #GNU Parallel released. See what is new in this release
http://nd.gd/2j Watch the intro video http://nd.gd/0s

https://savannah.gnu.org/news/?group=parallel

# Only 350 requests per hour: 1 tweet = 3 requests
# 119 tweets/hour = sleep 30 per tweet (40 to be safe)
cat twitters | grep -iv removed | 
  parallel -j1 sleep 40\; echo @{} You have earlier shown interest in GNU Parallel. \
A new version is out: http://nd.gd/2j '|' ttytter

== Send announce ==

http://groups.google.com/group/comp.unix.shell/post
Newsgroups: comp.unix.shell,comp.unix.admin

https://lists.gnu.org/mailman/admindb/bug-parallel
https://lists.gnu.org/mailman/admindb/parallel

<<<<<
from:tange@gnu.org
to:parallel@gnu.org, bug-parallel@gnu.org, info-gnu@gnu.org, bug-directory@gnu.org
cc:Peter Simons <simons@cryp.to>, Sandro Cazzaniga <kharec@mandriva.org>,
   Tim Cuthbertson <tim3d.junk@gmail.com>, Ludovic Courtès <ludo@gnu.org>,
   Markus Ammer <mkmm@gmx-topmail.de>, Pavel Nuzhdin <pnzhdin@gmail.com>,
   Phil Sung <psung@alum.mit.edu>, Michael Shigorin <mike@altlinux.org>,
   Andrew McFague <amcfague@wgen.net>, Steven M. Christensen <sunfreeware@gmail.com>,
   Chris Howey <howeyc@gmail.com>, Fethican Coşkuner <fethicanc@gmail.com>,
   Rogério Brito <rbrito@ime.usp.br>,
   Koen Vervloesem <koen@vervloesem.eu>, R. Tyler Croy <tyler@monkeypox.org>,
   ryoichiro.suzuki@gmail.com,kerick@shiftedbit.net,
   Christian Faulhammer <fauli@gentoo.org>, Ryoichiro Suzuki <ryoichiro.suzuki@gmail.com>,
   Jesse Alama <jesse.alama@gmail.com>

Subject: GNU Parallel 2011XX22 ('Pakistan') released

GNU Parallel 2011XX22 ('Pakistan') has been released. It is
available for download at: http://ftp.gnu.org/gnu/parallel/

New in this release:

* Implemented {//} for the input line with the basename removed (dirname).

* Using GNU Parallel with EC2. Thanks to Kevin Wu.
  http://blog.kevinformatics.com/post/4970574713/interested-in-your-experience-using-gnu-parallel-in

* Review with idea for {..} and {...} in Japanese. Thanks to ichii386.
  http://d.hatena.ne.jp/ichii386/20110426

* Upgrade GNU Parallel using Macports. Thanks to Phil Hollenback.
  http://www.hollenback.net/index.php/MacportsParallel

* Robert from Echo One discusses using processes instead of threads:
  http://rrees.wordpress.com/2011/04/25/many-cores-many-threads/

* Bug fixes and man page updates.


= About GNU Parallel =

GNU Parallel is a shell tool for executing jobs in parallel using one
or more computers. A job is can be a single command or a small script
that has to be run for each of the lines in the input. The typical
input is a list of files, a list of hosts, a list of users, a list of
URLs, or a list of tables. A job can also be a command that reads from
a pipe. GNU Parallel can then split the input and pipe it into
commands in parallel.

If you use xargs and tee today you will find GNU Parallel very easy to
use as GNU Parallel is written to have the same options as xargs. If
you write loops in shell, you will find GNU Parallel may be able to
replace most of the loops and make them run faster by running several
jobs in parallel.

GNU Parallel makes sure output from the commands is the same output as
you would get had you run the commands sequentially. This makes it
possible to use output from GNU Parallel as input for other programs.

You can find more about GNU Parallel at:
http://www.gnu.org/software/parallel/

Watch the intro video on http://www.youtube.com/watch?v=OpaiGYxkSuQ or
at http://tinyogg.com/watch/TORaR/ and http://tinyogg.com/watch/hfxKj/

When using GNU Parallel for a publication please cite:

O. Tange (2011): GNU Parallel - The Command-Line Power Tool, ;login:
The USENIX Magazine, February 2011:42-47.
>>>>>
